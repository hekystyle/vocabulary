import{n as h,o as j,l as U,t as y,v as E,j as r,S as i,w as v}from"./index-9345f6dd.js";import{Q as c,u as N}from"./queryKeys-f8ff76b7.js";import{F as S}from"./Form-f278208b.js";import{u as w}from"./compact-item-3e00cd5c.js";import"./Tags-5f019b05.js";import"./index-76fdf931.js";import"./button-94f99fc5.js";function I(s){return typeof s.returnUrl=="string"}const M=()=>{const s=h(),n=j(),{termsRepository:a}=U(),{id:o}=y(),t=o?parseInt(o,10):NaN,p=E(c.terms.id(t)),{isFetching:f,error:u,data:d,status:l}=N(c.terms.id(t),async({signal:e})=>await a.getById(t,e),{enabled:!Number.isNaN(t),onError:e=>console.error(e)}),{mutateAsync:g}=w(c.terms.id(t),a.update.bind(a),{onError:e=>console.error(e)}),m=()=>{v(n.state)&&I(n.state)?s(n.state.returnUrl):s("/records")},x=e=>{g(e).then(m).catch(console.error)},b=()=>m();if(p)return r.jsx(i,{label:"Updating ..."});if(f)return r.jsx(i,{label:"Loading ..."});switch(l){case"loading":return r.jsx(i,{label:"Loading ..."});case"error":return r.jsxs("p",{children:["Error: ",u instanceof Error?u.message:"Unknown"]});case"success":return d===void 0?r.jsxs("p",{children:["Term not found by ID: ",o]}):r.jsx(S,{defaultValue:d,onCancel:b,onSubmit:x});default:return r.jsxs("p",{children:["Unknown status: ",l]})}};export{M as default};
