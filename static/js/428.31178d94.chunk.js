"use strict";(self.webpackChunkvocabulary=self.webpackChunkvocabulary||[]).push([[428],{7428:function(r,e,t){t.r(e),t.d(e,{default:function(){return O}});var n=t(5052),o=t(9603),i=t(8758),s=t(8934),a=t(2791),u=t(2530),c=t(6702),d=t(1933),l=t(6162),f=t(6346),x=t(7689),g=t(9286),v=t(7309),p=t(184),w=function(){var r=(0,x.s0)();return(0,p.jsx)(v.ZP,{"aria-label":"Add",icon:(0,p.jsx)(g.Z,{}),type:"primary",onClick:function(){return r("/records/create")}})},m=t(5861),C=t(4687),j=t.n(C),y=t(1752),h=t(2622),k=t(1246),Z=t(3099),b=function(r){var e=r.record,t=(0,x.s0)(),n=(0,c.S)().termsRepository,o=(0,d.useQueryClient)(),i=(0,d.useIsMutating)(["terms"])>0,s=(0,d.useMutation)(l.U.terms.id(e.id),(0,m.Z)(j().mark((function r(){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.id){r.next=6;break}return r.next=3,n.delete(e.id);case 3:r.t0=r.sent,r.next=7;break;case 6:r.t0=void 0;case 7:return r.abrupt("return",r.t0);case 8:case"end":return r.stop()}}),r)}))),{onSuccess:function(){return o.invalidateQueries(l.U.terms.all())},onError:function(r){return console.error(r)}}).mutate,u=(0,a.useCallback)((function(){k.Z.confirm({title:(0,p.jsxs)(p.Fragment,{children:["Are you sure to delete ",(0,p.jsx)("b",{children:e.word}),"?"]}),onOk:function(){return s(void 0)},okButtonProps:{danger:!0}})}),[s,e.word]);return(0,p.jsxs)(Z.Z,{children:[(0,p.jsx)(v.ZP,{"aria-label":"edit",disabled:i,icon:(0,p.jsx)(y.Z,{}),loading:i,onClick:function(){return e.id&&t("/records/".concat(e.id))}}),(0,p.jsx)(v.ZP,{danger:!0,"aria-label":"delete",disabled:i,icon:(0,p.jsx)(h.Z,{}),loading:i,onClick:u})]})},A=function(){var r=(0,f.L)(),e=r.filter,t=e.page,n=e.sortField,o=void 0===n?"createdAt":n,x=e.sortOrder,g=void 0===x?"descend":x,v=r.update,m=(0,c.S)().termsRepository,C=(0,d.useQuery)(l.U.terms.filter({pageSize:20,page:t,sortField:o,sortOrder:g}),(function(r){var e=r.signal;return m.get({pageSize:20,page:null!==t&&void 0!==t?t:1,sortField:o,sortOrder:g},e)}),{onError:function(r){return console.error(r)}}),j=C.error,y=C.data,h=C.isFetching,k=(0,a.useMemo)((function(){return function(r){var e=r.sortField,t=r.sortOrder;return[{key:"word",title:"Word",dataIndex:"word",ellipsis:{showTitle:!0},sorter:!0,sortOrder:"word"===e?t:null},{key:"answersCount",dataIndex:"answersCount",title:(0,p.jsx)(i.Z,{title:"Total answers count",children:"Total"}),sorter:!0,sortOrder:"answersCount"===e?t:null,render:function(r,e){return e.answersCount}},{key:"correctAnswersCount",dataIndex:"correctAnswersCount",title:(0,p.jsx)(i.Z,{title:"Correct answers count",children:"Correct"}),sorter:!0,sortOrder:"correctAnswersCount"===e?t:null,render:function(r,e){return e.correctAnswersCount}},{key:"createdAt",dataIndex:"createdAt",title:"Created at",sorter:!0,sortOrder:"createdAt"===e?t:null,render:function(r,e){var t;return null===(t=e.createdAt)||void 0===t?void 0:t.toLocaleDateString()}},{key:"actions",align:"right",fixed:"right",width:"0",title:function(){return(0,p.jsx)(w,{})},render:function(r,e){return(0,p.jsx)(b,{record:e})}}]}({sortOrder:g,sortField:o})}),[o,g]);if(h)return(0,p.jsx)(u.E,{label:"Loading terms ..."});if(j)return(0,p.jsxs)("p",{children:["Error: ",j instanceof Error?j.message:"Unknown"]});var Z=null!==y&&void 0!==y?y:{},A=Z.terms,O=Z.total;return(0,p.jsx)(s.Z,{columns:k,dataSource:A,pagination:{total:O,pageSize:20,defaultCurrent:t,onChange:function(r){return v({page:r})}},rowKey:function(r){var e;return null!==(e=r.id)&&void 0!==e?e:"undefined"},scroll:{x:!0},size:"middle",onChange:function(r,e,t){var n,o=(n=t,n instanceof Array?n:[n])[0],i=o.field,s=o.order;v({sortField:null===i||void 0===i?void 0:i.toString(),sortOrder:null!==s&&void 0!==s?s:"ascend"})}})},O=function(){return(0,p.jsx)(n.Z,{justify:"center",children:(0,p.jsx)(o.Z,{flex:"920px",children:(0,p.jsx)(A,{})})})}},6162:function(r,e,t){t.d(e,{U:function(){return o}});var n=t(3433),o={terms:{all:function(){return["terms"]},filter:function(r){return[].concat((0,n.Z)(o.terms.all()),[r])},id:function(r){return[].concat((0,n.Z)(o.terms.all()),[r])},tags:{all:function(){return[].concat((0,n.Z)(o.terms.all()),["tags"])}}},dictionary:{all:function(){return["dictionary"]},word:function(r){return[].concat((0,n.Z)(o.dictionary.all()),[r])}}}}}]);
//# sourceMappingURL=428.31178d94.chunk.js.map