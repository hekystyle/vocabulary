(this.webpackJsonpvocabulary=this.webpackJsonpvocabulary||[]).push([[0],{246:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),i=n(29),o=n.n(i),s=n(47),u=n(26),l=n(48),d=n(1),j=n(5),b=n(251),f=n(154),O=n(41),p=n(38),h=n(103),v=n(13),x=n(14),g=n(85),m=n.n(g),w=function(){function e(){Object(v.a)(this,e),this.controller=new AbortController}return Object(x.a)(e,[{key:"abort",value:function(){this.controller.abort()}},{key:"word",value:function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.dictionaryapi.dev/api/v2/entries/en_US/".concat(t),{headers:{Accept:"application/json"},signal:this.controller.signal});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=n(6),y=l.a.ul(r||(r=Object(s.a)(["\n  color: white;\n"])));function k(e){var t=e.word,n=e.onPartOfSpeechClick,r=e.onDefinitionClick,a=Object(c.useState)(),i=Object(j.a)(a,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){if(""!==t){var e=new w;return e.word(t).then((function(e){s(e[0])})).catch((function(e){return console.error(e)})),function(){return e.abort()}}s(void 0)}),[t]),Object(C.jsx)(y,{children:null===o||void 0===o?void 0:o.meanings.map((function(e,t){return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{onClick:function(){return n&&n(e.partOfSpeech)},children:e.partOfSpeech}),Object(C.jsx)("ul",{children:e.definitions.map((function(t,n){return Object(C.jsx)("li",{onClick:function(){return r&&r({partOfSpeech:e.partOfSpeech,definition:t.definition})},children:t.definition},n)}))})]},t)}))})}var S=n(55),A=n(56),I=Object(S.b)({selectId:function(e){return e.id},sortComparer:function(e,t){return e.id-t.id}}),F=I.getSelectors((function(e){return e.dictionary})),R=F.selectAll,P=F.selectById,T=(F.selectEntities,F.selectIds,F.selectTotal,I.getInitialState()),E=Object(S.c)({name:"dictionary",initialState:T,reducers:{addOne:{reducer:I.addOne,prepare:function(e){return{payload:Object(d.a)(Object(d.a)({},e),{},{id:Date.now()})}}},updateOne:I.updateOne,removeOne:I.removeOne,answer:function(e,t){var n=t.payload,r=n.entity,c=n.isCorrect,a=e.entities[r.id];a&&(a.answersCount++,c&&a.correctAnswersCount++)}}}),B=Object(S.c)({name:"records/table",initialState:{page:1},reducers:{update:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),n)}}}),N=Object(A.b)({table:B.reducer}),D=p.c,L=n(72),M=Object(L.a)(R,(function(e){return e.map((function(e){return{value:e.word}}))})),W=Object(L.a)(R,(function(e){return Array.from(new Set(e.map((function(e){return e.partOfSpeech})))).map((function(e){return{value:e}}))}));function J(e){var t=Object(u.i)().id,n=Object(p.c)((function(e){return t?P(e,parseInt(t)):void 0})),r=Object(c.useState)(Object(d.a)({id:0,word:"",partOfSpeech:"",translation:"",definition:"",answersCount:0,correctAnswersCount:0},null!==n&&void 0!==n?n:{})),a=Object(j.a)(r,2),i=a[0],o=a[1],s=Object(u.g)(),l=function(){return s.push("/")},h=Object(p.b)(),v=function(e){return o((function(t){return Object(d.a)(Object(d.a)({},t),e)}))},x=D(M),g=D(W);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(b.a,{allowClear:!0,placeholder:"Word",value:i.word,options:x,filterOption:function(e,t){return"string"===typeof(null===t||void 0===t?void 0:t.value)&&t.value.startsWith(e)},onChange:function(e){return v({word:null!==e&&void 0!==e?e:""})},onSelect:function(e){return v({word:e})},style:{width:"100%"}}),Object(C.jsx)(b.a,{allowClear:!0,placeholder:"Part ot speech",value:i.partOfSpeech,options:g,onChange:function(e){return v({partOfSpeech:null!==e&&void 0!==e?e:""})},onSelect:function(e){return v({partOfSpeech:e})},style:{width:"100%"}}),Object(C.jsx)(f.a,{placeholder:"Translation",value:i.translation,onChange:function(e){return v({translation:e.target.value})}}),Object(C.jsx)(f.a.TextArea,{placeholder:"Definition",value:i.definition,onChange:function(e){return v({definition:e.target.value})}}),Object(C.jsx)(O.a,{type:"primary",onClick:function(){h(t?E.actions.updateOne({id:i.id,changes:i}):E.actions.addOne(i)),l()},children:"Confirm"}),Object(C.jsx)(O.a,{type:"primary",danger:!0,onClick:function(){return l()},children:"Cancel"}),Object(C.jsx)(k,{word:i.word,onPartOfSpeechClick:function(e){return v({partOfSpeech:e})},onDefinitionClick:function(e){return v(e)}})]})}function z(){var e=Object(u.j)().path;return Object(C.jsxs)(u.d,{children:[Object(C.jsx)(u.b,{path:"".concat(e,"/:id?"),component:J}),Object(C.jsx)(u.a,{to:"".concat(e)})]})}var U,G=n(263),K=n(264),_=n(265),q=n(81),H=n(259),Q=n(252),V=n(256),X=Object(l.a)(V.a)(U||(U=Object(s.a)(["\n  .ant-pagination {\n    background-color: white;\n    padding: 16px 0;\n    margin: 0;\n  }\n"])));function Y(e){return Object(C.jsx)(X,Object(d.a)({},e))}function Z(e){var t=Object(u.g)(),n=Object(p.b)(),r=[{title:"Word",dataIndex:"word",ellipsis:{showTitle:!0}},{title:Object(C.jsx)(q.a,{title:"Total answers / Correct answers",children:"Total / Correct"}),render:function(e,t){return Object(C.jsxs)(C.Fragment,{children:[t.answersCount," / ",t.correctAnswersCount]})}},{title:function(){return Object(C.jsx)(O.a,{type:"primary",onClick:function(){return t.push("/record")},children:Object(C.jsx)(G.a,{})})},render:function(e,r){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(O.a,{onClick:function(){return t.push("/record/".concat(r.id))},children:Object(C.jsx)(K.a,{})}),Object(C.jsx)(H.a,{title:"Are you sure to delete this?",onConfirm:function(){n(E.actions.removeOne(r.id))},children:Object(C.jsx)(O.a,{children:Object(C.jsx)(_.a,{})})})]})}}],c=Object(p.c)((function(e){return Object(Q.a)((function(e,t){var n,r;return(null!==(n=t.id)&&void 0!==n?n:0)-(null!==(r=e.id)&&void 0!==r?r:0)}),R(e))})),a=D((function(e){return e.records.table.page}));return Object(C.jsx)(Y,{columns:r,dataSource:c,size:"middle",rowKey:"id",pagination:{defaultCurrent:a,onChange:function(e){return n(B.actions.update({page:e}))}}})}var $,ee,te=function(){var e=Object(u.j)().path;return Object(C.jsx)(u.d,{children:Object(C.jsx)(u.b,{path:"".concat(e),component:Z})})},ne=n(253),re=n(260),ce=n(261),ae=n(8),ie=n(2),oe=n(254);!function(e){e[e.relative=0]="relative",e[e.absolute=1]="absolute"}(ee||(ee={}));var se,ue,le,de=($={},Object(ie.a)($,ee.relative,(function(e){var t=e.answersCount,n=e.correctAnswersCount;return Math.floor(100/t*n)})),Object(ie.a)($,ee.absolute,(function(e){return e.answersCount+e.correctAnswersCount})),$),je={config:void 0,isActive:!1,stack:[],isRevealed:!1},be=Object(S.c)({name:"practice/session",initialState:je,reducers:{start:{reducer:function(e,t){var n=t.payload,r=n.stack;return{config:n.config,isActive:!0,stack:r,isRevealed:!1}},prepare:function(e,t){var n=t.filter((function(e){return""!==e.translation||""!==e.definition})).map((function(t){return{id:t.id,score:t.answersCount>=10?de[e.scoreAlgorithm](t):0}})).sort((function(e,t){return t.score-e.score})),r=Object(oe.a)((function(e,t){return e.score===t.score}),n).map((function(e){return function(e){for(var t=Object(ae.a)(e),n=t.length;n;){var r=Math.floor(Math.random()*n--),c=t[n];t[n]=t[r],t[r]=c}return t}(e)})).reduce((function(e,t){return[].concat(Object(ae.a)(e),Object(ae.a)(t.map((function(e){return e.id}))))}),[]);return{payload:{config:e,stack:r}}}},reveal:function(e){return Object(d.a)(Object(d.a)({},e),{},{isRevealed:!0})},next:function(e){return e.stack.pop(),e.isRevealed=!1,e},close:function(){return{config:void 0,isActive:!1,stack:[],isRevealed:!1}}}}),fe=Object(A.b)({session:be.reducer}),Oe=Object(l.a)(re.a.Body)(se||(se=Object(s.a)(["\n  overflow: auto;\n"]))),pe=l.a.div(ue||(ue=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n"]))),he=function(){var e=D((function(e){return e.practice.session.isRevealed})),t=D((function(e){var t=Object(ce.a)(e.practice.session.stack);return t?P(e,t):void 0})),n=function(){var e=window.speechSynthesis;return Object(c.useEffect)((function(){return function(){return e.cancel()}}),[e]),{speak:function(t){e.cancel();var n=new SpeechSynthesisUtterance(t);e.speak(n)}}}().speak,r=D((function(e){var t;return null===(t=e.practice.session.config)||void 0===t?void 0:t.playAfterReveal})),a=Object(p.b)(),i=function(e){t&&a(E.actions.answer({isCorrect:e,entity:t})),a(be.actions.next())},o=Object(u.g)();return Object(C.jsxs)(C.Fragment,{children:[t&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(re.a,{children:Object(C.jsxs)(re.a.Body,{className:"text-center",children:[Object(C.jsx)("div",{children:t.translation}),Object(C.jsxs)("div",{children:["(",Object(C.jsx)("i",{children:t.partOfSpeech}),")"]})]})}),Object(C.jsx)(re.a,{children:Object(C.jsx)(Oe,{className:"text-center",children:t.definition})}),Object(C.jsx)(re.a,{children:Object(C.jsx)(re.a.Body,{className:"text-center",children:e?Object(C.jsxs)(pe,{children:[t.word,Object(C.jsx)(ne.a,{onClick:function(){return n(t.word)},children:"Play it again"})]}):"?"})}),e?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ne.a,{variant:"success",onClick:function(){return i(!0)},children:"I was correct"}),Object(C.jsx)(ne.a,{variant:"danger",onClick:function(){return i(!1)},children:"I was incorrect"})]}):Object(C.jsx)(ne.a,{onClick:function(){a(be.actions.reveal()),t&&r&&n(t.word)},children:"Reveal answer"}),Object(C.jsx)(ne.a,{onClick:function(){o.push("record/".concat(null===t||void 0===t?void 0:t.id))},children:"Edit current term"})]}),Object(C.jsx)(ne.a,{onClick:function(){a(be.actions.close())},children:"End session"})]})},ve=n(63),xe=n(262),ge=function(){var e=Object(c.useState)({scoreAlgorithm:ee.relative,playAfterReveal:!1}),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(p.b)(),i=D(R),o=function(e){return r((function(t){return Object(d.a)(Object(d.a)({},t),e)}))},s=n.scoreAlgorithm,u=n.playAfterReveal;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ve.a,{value:s,options:[{value:ee.relative,label:"relative"},{value:ee.absolute,label:"absolute"}],onSelect:function(e,t){return o({scoreAlgorithm:t.value})}}),Object(C.jsx)(xe.a,{checked:u,checkedChildren:"Play word after reveal",unCheckedChildren:"Play word after reveal",onChange:function(e){return o({playAfterReveal:e})}}),Object(C.jsx)(ne.a,{onClick:function(){a(be.actions.start(n,i))},children:"Start session"})]})},me=l.a.div(le||(le=Object(s.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"])));function we(e){var t=D((function(e){return e.practice.session.isActive}));return Object(C.jsx)(me,{children:t?Object(C.jsx)(he,{}):Object(C.jsx)(ge,{})})}function Ce(){var e=Object(u.j)().path;return Object(C.jsxs)(u.d,{children:[Object(C.jsx)(u.b,{path:"".concat(e),exact:!0,component:we}),Object(C.jsx)(u.a,{to:e})]})}var ye,ke,Se=n(257),Ae=n(255),Ie=n(258),Fe=[{title:"List",path:"/list"},{title:"Practice",path:"/practice"}],Re=function(){var e=Object(u.g)(),t=Object(u.h)().pathname;return Object(C.jsx)(Se.a,{variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(C.jsxs)(Ae.a,{children:[Object(C.jsx)(Se.a.Toggle,{style:{flexGrow:1}}),Object(C.jsx)(Se.a.Collapse,{children:Object(C.jsx)(Ie.a,{children:Fe.map((function(n,r){var c=n.title,a=n.path;return Object(C.jsx)(Ie.a.Link,{href:"#",active:a===t,onClick:function(){return e.push(a)},children:c},r)}))})})]})})},Pe=l.a.div(ye||(ye=Object(s.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  font-size: calc(10px + 2vmin);\n"]))),Te=l.a.div(ke||(ke=Object(s.a)(["\n  flex-grow: 1;\n  overflow: auto;\n"])));function Ee(){return Object(C.jsxs)(Pe,{className:"bg-dark",children:[Object(C.jsx)(Re,{}),Object(C.jsx)(Te,{children:Object(C.jsxs)(u.d,{children:[Object(C.jsx)(u.b,{path:"/record",component:z}),Object(C.jsx)(u.b,{path:"/practice",component:Ce}),Object(C.jsx)(u.b,{path:"/list",component:te}),Object(C.jsx)(u.a,{to:"/list"})]})})]})}var Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,266)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},Ne=(n(244),n(245),n(246),Object(A.b)({records:N,dictionary:E.reducer,practice:fe})),De="vocabulary";var Le,Me=n(58),We=Object(S.a)({reducer:Ne,preloadedState:{dictionary:I.setMany(I.getInitialState(),null!==(Le=function(){var e=localStorage.getItem(De);return e?JSON.parse(e):void 0}())&&void 0!==Le?Le:[])}});We.subscribe((function(){var e,t=We.getState();e=I.getSelectors().selectAll(t.dictionary),localStorage.setItem(De,JSON.stringify(e))})),o.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(p.a,{store:We,children:Object(C.jsx)(Me.a,{children:Object(C.jsx)(Ee,{})})})}),document.getElementById("root")),Be(),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("./service-worker.js")}),{once:!0,passive:!0})}},[[247,1,2]]]);
//# sourceMappingURL=main.2c95bb9f.chunk.js.map